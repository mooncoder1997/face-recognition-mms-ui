webpackJsonp([9],{"+4l4":function(e,r){},Ptqg:function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=s("//Fk"),a=s.n(t),i=s("vMJZ"),n={name:"UserManage",data:function(){return{loading:!0,isAddUser:!1,searchUserId:"",columns:[{title:"编号",key:"userId",minWidth:120,sortable:!0,align:"center"},{title:"姓名",key:"userName",slot:"userName",minWidth:100,align:"center"},{title:"性别",key:"userGender",slot:"userGender",minWidth:80,align:"center",filters:[{label:"男",value:1},{label:"女",value:2}],filterMultiple:!1,filterMethod:function(e,r){return 1===e?"男"===r.userGender:2===e?"女"===r.userGender:void 0}},{title:"邮箱",key:"userEmail",slot:"userEmail",minWidth:180,align:"center"},{title:"手机号",key:"userMobile",slot:"userMobile",minWidth:130,align:"center"},{title:"角色",key:"userRoleName",slot:"userRoleName",minWidth:100,align:"center",filters:[{label:"管理员",value:1},{label:"普通用户",value:2}],filterMultiple:!1,filterMethod:function(e,r){return 1===e?"admin"===r.userRoleName:2===e?"user"===r.userRoleName:void 0}},{title:"备注",key:"userRemarks",slot:"userRemarks",minWidth:80,align:"center"},{title:"操作",slot:"action",minWidth:230,align:"center"}],data:[],editIndex:-1,editUserId:"",editUserName:"",editUserGender:"",editUserEmail:"",editUserMobile:"",editUserRoleName:"",editUserFaceId:"",editUserRemarks:"",formValidate:{userId:"",userPassword:"",userName:"",userGender:"男",userEmail:"",userMobile:"",userRoleName:"user",userRemarks:""},ruleValidate:{userId:[{required:!0,message:"用户编号不能为空！",trigger:"blur"}],userPassword:[{required:!0,message:"用户密码不能为空！",trigger:"blur"}],userName:[{required:!0,message:"用户姓名不能为空！",trigger:"blur"}],userGender:[{required:!0,message:"请选择性别！",trigger:"blur"}],userEmail:[{required:!0,message:"用户邮箱不能为空！",trigger:"blur"},{type:"email",message:"邮箱格式不正确！",trigger:"blur"}],userMobile:[{required:!0,message:"用户手机号不能为空！",trigger:"blur"}],userRoleName:[{required:!0,message:"请选择用户角色！",trigger:"blur"}]}}},methods:{queryUserByUserId:function(e){var r=this;if(e)return new a.a(function(s,t){Object(i.d)(e).then(function(e){if(200===e.status){var s=[];s.push(e.data),r.data=s,r.$Message.success("查询用户成功！")}else r.data=[],r.$Message.error("查询用户失败！")})});this.queryAllUser()},queryAllUser:function(){var e=this;return new a.a(function(r,s){Object(i.c)().then(function(r){200===r.status?(e.$Message.success("获取所有用户成功!"),e.data=r.data,e.loading=!1):e.$Message.success("获取所有用户失败!")})}).catch(function(e){reject(e)})},updateUser:function(e,r,s,t,n,d,o){var l=this;return new a.a(function(a,u){Object(i.f)(e,r,s,t,n,d,o).then(function(e){201===e.status?l.$Message.success("更新用户成功!"):l.$Message.error("更新用户失败!")})})},deleteUserByUserId:function(e){var r=this;return new a.a(function(s,t){Object(i.b)(e).then(function(e){204===e.status?r.$Message.success("删除用户成功!"):r.$Message.error("删除用户失败!")})})},addUser:function(){var e=this;return new a.a(function(r,s){Object(i.a)(e.$refs.addUserForm.model.userId,e.$refs.addUserForm.model.userPassword,e.$refs.addUserForm.model.userName,e.$refs.addUserForm.model.userGender,e.$refs.addUserForm.model.userEmail,e.$refs.addUserForm.model.userMobile,e.$refs.addUserForm.model.userRoleName,e.$refs.addUserForm.model.userRemarks).then(function(r){201===r.status?(e.$Message.success("添加用户成功!"),e.data.push({userId:e.$refs.addUserForm.model.userId,userName:e.$refs.addUserForm.model.userName,userGender:e.$refs.addUserForm.model.userGender,userEmail:e.$refs.addUserForm.model.userEmail,userMobile:e.$refs.addUserForm.model.userMobile,userRoleName:e.$refs.addUserForm.model.userRoleName,userRemarks:e.$refs.addUserForm.model.userRemarks})):e.$Message.error("添加用户失败！")})})},handleDelete:function(e,r){this.deleteUserByUserId(e.userId),this.data.splice(r,1)},handleCancel:function(){this.$Message.info("取消删除")},handleEdit:function(e,r){this.editUserId=e.userId,this.editUserName=e.userName,this.editUserGender=e.userGender,this.editUserEmail=e.userEmail,this.editUserMobile=e.userMobile,this.editUserRoleName=e.userRoleName,this.editUserFaceId=e.userFaceId,this.editUserRemarks=e.userRemarks,this.editIndex=r},handleSave:function(e){this.data[e].userId=this.editUserId,this.data[e].username=this.editUserName,this.data[e].userGender=this.editUserGender,this.data[e].userEmail=this.editUserEmail,this.data[e].userMobile=this.editUserMobile,this.data[e].userRoleName=this.editUserRoleName,this.data[e].userFaceId=this.editUserFaceId,this.data[e].userRemarks=this.editUserRemarks,this.editIndex=-1,this.updateUser(this.editUserId,this.editUserName,this.editUserGender,this.editUserEmail,this.editUserMobile,this.editUserRoleName,this.editUserRemarks)},exportData:function(){this.$refs.userTable.exportCsv({filename:"用户表"}),this.$Message.success("导出用户表成功")}},mounted:function(){this.queryAllUser()}},d={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[s("div",{staticClass:"query-c"},[e._v("\n    查询指定用户：\n    "),s("Input",{staticStyle:{width:"auto"},attrs:{search:"",placeholder:"请输入用户编号"},on:{"on-search":e.queryUserByUserId},model:{value:e.searchUserId,callback:function(r){e.searchUserId=r},expression:"searchUserId"}}),e._v(" "),s("Button",{attrs:{type:"primary",icon:"ios-add-circle-outline"},on:{click:function(r){e.isAddUser=!0}}},[e._v("添加用户")])],1),e._v(" "),s("br"),e._v(" "),s("Table",{ref:"userTable",attrs:{border:"",stripe:"",columns:e.columns,data:e.data,loading:e.loading},scopedSlots:e._u([{key:"userId",fn:function(r){var t=r.row,a=r.index;return[e.editIndex===a?s("Input",{attrs:{type:"text"},model:{value:e.editUserId,callback:function(r){e.editUserId=r},expression:"editUserId"}}):s("span",[e._v(e._s(t.userId))])]}},{key:"userName",fn:function(r){var t=r.row,a=r.index;return[e.editIndex===a?s("Input",{attrs:{type:"text"},model:{value:e.editUserName,callback:function(r){e.editUserName=r},expression:"editUserName"}}):s("span",[e._v(e._s(t.userName))])]}},{key:"userGender",fn:function(r){var t=r.row,a=r.index;return[e.editIndex===a?s("Select",{model:{value:e.editUserGender,callback:function(r){e.editUserGender=r},expression:"editUserGender"}},[s("Option",{attrs:{value:"男"}},[e._v("男")]),e._v(" "),s("Option",{attrs:{value:"女"}},[e._v("女")])],1):s("span",[e._v(e._s(t.userGender))])]}},{key:"userEmail",fn:function(r){var t=r.row,a=r.index;return[e.editIndex===a?s("Input",{attrs:{type:"text"},model:{value:e.editUserEmail,callback:function(r){e.editUserEmail=r},expression:"editUserEmail"}}):s("span",[e._v(e._s(t.userEmail))])]}},{key:"userMobile",fn:function(r){var t=r.row,a=r.index;return[e.editIndex===a?s("Input",{attrs:{type:"text"},model:{value:e.editUserMobile,callback:function(r){e.editUserMobile=r},expression:"editUserMobile"}}):s("span",[e._v(e._s(t.userMobile))])]}},{key:"userRoleName",fn:function(r){var t=r.row,a=r.index;return[e.editIndex===a?s("Select",{model:{value:e.editUserRoleName,callback:function(r){e.editUserRoleName=r},expression:"editUserRoleName"}},[s("Option",{attrs:{value:"user"}},[e._v("user")]),e._v(" "),s("Option",{attrs:{value:"admin"}},[e._v("admin")])],1):s("span",[e._v(e._s(t.userRoleName))])]}},{key:"userFaceId",fn:function(r){var t=r.row,a=r.index;return[e.editIndex===a?s("Input",{attrs:{type:"text"},model:{value:e.editUserFaceId,callback:function(r){e.editUserFaceId=r},expression:"editUserFaceId"}}):s("span",[e._v(e._s(t.userFaceId))])]}},{key:"userRemarks",fn:function(r){var t=r.row,a=r.index;return[e.editIndex===a?s("Input",{attrs:{type:"text"},model:{value:e.editUserRemarks,callback:function(r){e.editUserRemarks=r},expression:"editUserRemarks"}}):s("span",[e._v(e._s(t.userRemarks))])]}},{key:"action",fn:function(r){var t=r.row,a=r.index;return[e.editIndex===a?s("div",[s("Button",{attrs:{type:"success",icon:"md-checkmark",size:"small"},on:{click:function(r){return e.handleSave(a)}}},[e._v("保存")]),e._v(" "),s("Button",{attrs:{type:"warning",icon:"md-close",size:"small"},on:{click:function(r){e.editIndex=-1}}},[e._v("取消")]),e._v(" "),s("Poptip",{attrs:{confirm:"",title:"您确定删除这条内容吗?",placement:"top-end",transfer:"","ok-text":"确定","cancel-text":"取消"},on:{"on-ok":function(r){return e.handleDelete(t,a)},"on-cancel":e.handleCancel}},[s("Button",{attrs:{type:"error",icon:"md-trash",size:"small"}},[e._v("删除")])],1)],1):s("div",[s("Button",{attrs:{type:"info",icon:"md-create",size:"small"},on:{click:function(r){return e.handleEdit(t,a)}}},[e._v("操作")]),e._v(" "),s("Poptip",{attrs:{confirm:"",title:"您确定删除这条内容吗?",placement:"top-end",transfer:"","ok-text":"确定","cancel-text":"取消"},on:{"on-ok":function(r){return e.handleDelete(t,a)},"on-cancel":e.handleCancel}},[s("Button",{attrs:{type:"error",icon:"md-trash",size:"small"}},[e._v("删除")])],1)],1)]}}])}),e._v(" "),s("br"),e._v(" "),s("Button",{attrs:{type:"primary"},on:{click:e.exportData}},[s("Icon",{attrs:{type:"ios-download-outline"}}),e._v("\n    导出数据\n  ")],1),e._v(" "),s("Modal",{attrs:{title:"添加新的用户"},on:{"on-ok":e.addUser,"on-cancel":e.cancel},model:{value:e.isAddUser,callback:function(r){e.isAddUser=r},expression:"isAddUser"}},[s("Form",{ref:"addUserForm",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":90}},[s("FormItem",{attrs:{label:"编号: ",prop:"userId"}},[s("Input",{attrs:{placeholder:"请输入用户编号..."},model:{value:e.formValidate.userId,callback:function(r){e.$set(e.formValidate,"userId",r)},expression:"formValidate.userId"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-create-outline"},slot:"prepend"})],1)],1),e._v(" "),s("FormItem",{attrs:{label:"密码: ",prop:"userPassword"}},[s("Input",{attrs:{type:"password",placeholder:"请输入用户密码..."},model:{value:e.formValidate.userPassword,callback:function(r){e.$set(e.formValidate,"userPassword",r)},expression:"formValidate.userPassword"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),e._v(" "),s("FormItem",{attrs:{label:"姓名: ",prop:"userName"}},[s("Input",{attrs:{placeholder:"请输入用户姓名..."},model:{value:e.formValidate.userName,callback:function(r){e.$set(e.formValidate,"userName",r)},expression:"formValidate.userName"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),e._v(" "),s("FormItem",{attrs:{label:"请选择性别: ",prop:"userGender"}},[s("RadioGroup",{model:{value:e.formValidate.userGender,callback:function(r){e.$set(e.formValidate,"userGender",r)},expression:"formValidate.userGender"}},[s("Radio",{attrs:{label:"男"}},[s("Icon",{attrs:{type:"ios-man",size:"16"}}),e._v(" "),s("span",[e._v("男")])],1),e._v(" "),s("Radio",{attrs:{label:"女"}},[s("Icon",{attrs:{type:"ios-woman",size:"16"}}),e._v(" "),s("span",[e._v("女")])],1)],1)],1),e._v(" "),s("FormItem",{attrs:{label:"邮箱: ",prop:"userEmail"}},[s("Input",{attrs:{placeholder:"请输入用户邮箱地址..."},model:{value:e.formValidate.userEmail,callback:function(r){e.$set(e.formValidate,"userEmail",r)},expression:"formValidate.userEmail"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-mail-outline"},slot:"prepend"})],1)],1),e._v(" "),s("FormItem",{attrs:{label:"手机号: ",prop:"userMobile"}},[s("Input",{attrs:{placeholder:"请输入用户手机号..."},model:{value:e.formValidate.userMobile,callback:function(r){e.$set(e.formValidate,"userMobile",r)},expression:"formValidate.userMobile"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-call-outline"},slot:"prepend"})],1)],1),e._v(" "),s("FormItem",{attrs:{label:"请选择角色: ",prop:"userRoleName"}},[s("Select",{model:{value:e.formValidate.userRoleName,callback:function(r){e.$set(e.formValidate,"userRoleName",r)},expression:"formValidate.userRoleName"}},[s("Option",{attrs:{value:"user"}},[e._v("普通用户")]),e._v(" "),s("Option",{attrs:{value:"admin"}},[e._v("管理员")])],1)],1),e._v(" "),s("FormItem",{attrs:{label:"备注: ",prop:"userRemarks"}},[s("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:e.formValidate.userRemarks,callback:function(r){e.$set(e.formValidate,"userRemarks",r)},expression:"formValidate.userRemarks"}})],1)],1)],1)],1)},staticRenderFns:[]};var o=s("VU/8")(n,d,!1,function(e){s("+4l4")},"data-v-3928c87c",null);r.default=o.exports},vMJZ:function(e,r,s){"use strict";r.d=function(e){return Object(t.a)({url:"/mms-provider-user/api/v1/users/"+e,method:"get"})},r.c=function(){return Object(t.a)({url:"/mms-provider-user/api/v1/users",method:"get"})},r.f=function(e,r,s,a,i,n,d){var o={userId:e,userName:r,userGender:s,userEmail:a,userMobile:i,userRoleName:n,userRemarks:d};return Object(t.a)({url:"/mms-provider-user/api/v1/user",method:"put",data:o})},r.e=function(e,r){var s={userId:e,userPassword:r};return Object(t.a)({url:"/mms-provider-user/api/v1/user",method:"put",data:s})},r.b=function(e){return Object(t.a)({url:"/mms-provider-user/api/v1/user/"+e,method:"delete"})},r.a=function(e,r,s,a,i,n,d,o){var l={userId:e,userPassword:r,userName:s,userGender:a,userEmail:i,userMobile:n,userRoleName:d,userRemarks:o};return Object(t.a)({url:"/mms-provider-user/api/v1/user",method:"post",data:l})};var t=s("D/cR")}});
//# sourceMappingURL=9.50bf0db0fa01ddfb87eb.js.map