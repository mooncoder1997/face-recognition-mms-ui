{"version":3,"sources":["webpack:///./src/api/login.js","webpack:///src/components/Login/NormalLogin/index.vue","webpack:///./src/components/Login/NormalLogin/index.vue?99b6","webpack:///./src/components/Login/NormalLogin/index.vue","webpack:///./src/assets/bg04.jpg"],"names":["__webpack_exports__","username","password","data","request","url","method","transformRequest","ret","it","encodeURIComponent","headers","Content-Type","faceImageBase64","__WEBPACK_IMPORTED_MODULE_0__util_request__","__webpack_require__","NormalLogin","name","usernameError","passwordError","isShowLoading","bg","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","mounted","_this","this","document","onkeydown","e","keyCode","loginByUserNameAndPassWord","methods","verifyUsername","verifyPassword","faceLogin","$router","replace","_this2","promise_default","a","resolve","reject","Object","login","then","response","status","undefined","$Message","success","$store","commit","userId","userName","userGender","userEmail","userRoleName","error","catch","warning","Login_NormalLogin","render","_vm","_h","$createElement","_c","_self","staticClass","style","_v","attrs","prefix","placeholder","clearable","on","on-blur","model","value","callback","$$v","expression","_s","type","loading","click","shape","staticRenderFns","Component","normalizeComponent","ssrContext","module","exports","p"],"mappings":"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","file":"static/js/2.8b7cb4ee70e87c7a6a54.js","sourcesContent":["import request from '../util/request'\n\nexport function LoginByUserNameAndPassWord(username, password) {\n  const data = {\n    'username': username,\n    'password': password\n  };\n  return request({\n    url: 'http://10.211.55.4:8040/mms-provider-user/api/v1/user/session',\n    method: 'post',\n    data,\n    transformRequest: [function (data) {\n      // 将数据转换为表单数据\n      let ret = '';\n      for (let it in data) {\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\n      }\n      return ret\n    }],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  })\n}\n\nexport function LoginByFace(faceImageBase64) {\n  const data = {\n    'faceImageBase64': faceImageBase64\n  };\n  return request({\n    url: 'http://10.211.55.4:8040/mms-provider-face/api/v1/face/session',\n    method: 'post',\n    data\n  })\n}\n\nexport function logout() {\n  return request({\n    url: '/sm/api/v1/user/logout',\n    method: 'post'\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/login.js","<template>\n  <div class=\"login-vue\" :style=\"bg\">\n    <div class=\"container\">\n      <p class=\"title\">基于人脸识别的智能会议室管理系统</p>\n      <div class=\"input-c\">\n        <Input prefix=\"ios-contact\" v-model=\"username\" placeholder=\"用户名\" clearable @on-blur=\"verifyUsername\"/>\n        <p class=\"error\">{{usernameError}}</p>\n      </div>\n      <div class=\"input-c\">\n        <Input type=\"password\" v-model=\"password\" prefix=\"md-lock\" placeholder=\"密码\" clearable @on-blur=\"verifyPassword\"/>\n        <p class=\"error\">{{passwordError}}</p>\n      </div>\n      <Button :loading=\"isShowLoading\" class=\"submit\" type=\"primary\" @click=\"loginByUserNameAndPassWord\">登录</Button>\n      <Button class=\"account\" type=\"primary\" shape=\"circle\"><span @click=\"faceLogin\">刷脸登录</span></Button>\n      <!--<p class=\"account\"><span @click=\"register\">注册账号</span> | <span @click=\"forgetPwd\">忘记密码</span></p>-->\n    </div>\n  </div>\n</template>\n\n<script>\n  import {LoginByUserNameAndPassWord} from \"../../../api/login\";\n\n  export default {\n    name: 'Login',\n    data() {\n      return {\n        username: '',\n        password: '',\n        usernameError: '',\n        passwordError: '',\n        isShowLoading: false,\n        bg: {\n          backgroundImage: 'url(' + require('../../../assets/bg04.jpg'),\n          backgroundPosition: 'center center',\n          backgroundRepeat: \"no-repeat\",\n          backgroundSize: \"cover\",\n        }\n      }\n    },\n    mounted() {\n      document.onkeydown = e => {\n        if (e.keyCode == 13) {\n          this.loginByUserNameAndPassWord()\n        }\n      }\n    },\n    methods: {\n      verifyUsername(e) {\n        if (this.username === '') {\n          this.usernameError = '用户名不能为空！'\n        } else {\n          this.usernameError = ''\n        }\n      },\n      verifyPassword(e) {\n        if (this.password === '') {\n          this.passwordError = '密码不能为空！'\n        } else {\n          this.passwordError = ''\n        }\n      },\n      // register() {\n      //   this.$Message.warning(\"注册功能尚未开放\");\n      // },\n      // forgetPwd() {\n      //   this.$Message.warning(\"忘记密码功能尚未开放\");\n      // },\n      faceLogin() {\n        this.$router.replace({name: 'FaceLogin'});\n      },\n      loginByUserNameAndPassWord() {\n        if (this.username !== '' && this.password !== '') {\n          this.isShowLoading = true;\n          return new Promise(((resolve, reject) => {\n            LoginByUserNameAndPassWord(this.username, this.password).then(response => {\n              if (response.status === 201) {\n                document.onkeydown = undefined;\n                this.$Message.success(\"登录成功，即将跳转到主页!\");\n                // 登录成功，设置用户信息\n                this.$store.commit('setUser', {\n                  userId: response.data.userId,\n                  userName: response.data.userName,\n                  userGender: response.data.userGender,\n                  userEmail: response.data.userEmail,\n                  userRoleName: response.data.userRoleName\n                });\n                this.isShowLoading = false;\n                this.$router.replace('index')\n              } else {\n                this.$Message.error(response.data.error);\n                this.isShowLoading = false;\n              }\n            }).catch(error => {\n              this.$Message.error(error.response.data.error);\n              this.isShowLoading = false;\n              reject(error);\n            })\n          }));\n        } else {\n          this.$Message.warning(\"请输入用户名和密码\");\n        }\n      },\n    }\n  }\n</script>\n\n<style>\n  .login-vue {\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: #fff;\n  }\n\n  .login-vue .container {\n    background: rgba(255, 255, 255, .5);\n    width: 360px;\n    text-align: center;\n    border-radius: 10px;\n    padding: 50px;\n  }\n\n  .login-vue .ivu-input {\n    background-color: transparent;\n    color: #fff;\n    outline: #fff;\n    border-color: #fff;\n  }\n\n  .login-vue ::-webkit-input-placeholder { /* WebKit, Blink, Edge */\n    color: rgba(255, 255, 255, .8);\n  }\n\n  .login-vue :-moz-placeholder { /* Mozilla Firefox 4 to 18 */\n    color: rgba(255, 255, 255, .8);\n  }\n\n  .login-vue ::-moz-placeholder { /* Mozilla Firefox 19+ */\n    color: rgba(255, 255, 255, .8);\n  }\n\n  .login-vue :-ms-input-placeholder { /* Internet Explorer 10-11 */\n    color: rgba(255, 255, 255, .8);\n  }\n\n  .login-vue .title {\n    font-size: 16px;\n    margin-bottom: 20px;\n  }\n\n  .login-vue .input-c {\n    margin: auto;\n    width: 200px;\n  }\n\n  .login-vue .error {\n    color: red;\n    text-align: left;\n    margin: 5px auto;\n    font-size: 12px;\n    padding-left: 30px;\n    height: 20px;\n  }\n\n  .login-vue .submit {\n    width: 200px;\n  }\n\n  .login-vue .account {\n    margin-top: 30px;\n  }\n\n  .login-vue .account span {\n    cursor: pointer;\n  }\n\n  .login-vue .ivu-icon {\n    color: #eee;\n  }\n\n  .login-vue .ivu-icon-ios-close-circle {\n    color: #777;\n  }\n</style>\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/Login/NormalLogin/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-vue\",style:(_vm.bg)},[_c('div',{staticClass:\"container\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"基于人脸识别的智能会议室管理系统\")]),_vm._v(\" \"),_c('div',{staticClass:\"input-c\"},[_c('Input',{attrs:{\"prefix\":\"ios-contact\",\"placeholder\":\"用户名\",\"clearable\":\"\"},on:{\"on-blur\":_vm.verifyUsername},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_vm._v(\" \"),_c('p',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.usernameError))])],1),_vm._v(\" \"),_c('div',{staticClass:\"input-c\"},[_c('Input',{attrs:{\"type\":\"password\",\"prefix\":\"md-lock\",\"placeholder\":\"密码\",\"clearable\":\"\"},on:{\"on-blur\":_vm.verifyPassword},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_vm._v(\" \"),_c('p',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.passwordError))])],1),_vm._v(\" \"),_c('Button',{staticClass:\"submit\",attrs:{\"loading\":_vm.isShowLoading,\"type\":\"primary\"},on:{\"click\":_vm.loginByUserNameAndPassWord}},[_vm._v(\"登录\")]),_vm._v(\" \"),_c('Button',{staticClass:\"account\",attrs:{\"type\":\"primary\",\"shape\":\"circle\"}},[_c('span',{on:{\"click\":_vm.faceLogin}},[_vm._v(\"刷脸登录\")])])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-54426c7d\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Login/NormalLogin/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-54426c7d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-54426c7d\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Login/NormalLogin/index.vue\n// module id = null\n// module chunks = ","module.exports = __webpack_public_path__ + \"static/img/bg04.dff7ddf.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/bg04.jpg\n// module id = izGb\n// module chunks = 1 2"],"sourceRoot":""}