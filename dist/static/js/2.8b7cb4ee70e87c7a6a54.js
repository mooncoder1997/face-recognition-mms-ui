webpackJsonp([2],{"/jX6":function(e,r){},M9A7:function(e,r,s){"use strict";r.b=function(e,r){var s={username:e,password:r};return Object(a.a)({url:"http://10.211.55.4:8040/mms-provider-user/api/v1/user/session",method:"post",data:s,transformRequest:[function(e){var r="";for(var s in e)r+=encodeURIComponent(s)+"="+encodeURIComponent(e[s])+"&";return r}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},r.a=function(e){var r={faceImageBase64:e};return Object(a.a)({url:"http://10.211.55.4:8040/mms-provider-face/api/v1/face/session",method:"post",data:r})};var a=s("D/cR")},Pu6E:function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=s("//Fk"),n=s.n(a),t=s("M9A7"),o={name:"Login",data:function(){return{username:"",password:"",usernameError:"",passwordError:"",isShowLoading:!1,bg:{backgroundImage:"url("+s("izGb"),backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}},mounted:function(){var e=this;document.onkeydown=function(r){13==r.keyCode&&e.loginByUserNameAndPassWord()}},methods:{verifyUsername:function(e){""===this.username?this.usernameError="用户名不能为空！":this.usernameError=""},verifyPassword:function(e){""===this.password?this.passwordError="密码不能为空！":this.passwordError=""},faceLogin:function(){this.$router.replace({name:"FaceLogin"})},loginByUserNameAndPassWord:function(){var e=this;if(""!==this.username&&""!==this.password)return this.isShowLoading=!0,new n.a(function(r,s){Object(t.b)(e.username,e.password).then(function(r){201===r.status?(document.onkeydown=void 0,e.$Message.success("登录成功，即将跳转到主页!"),e.$store.commit("setUser",{userId:r.data.userId,userName:r.data.userName,userGender:r.data.userGender,userEmail:r.data.userEmail,userRoleName:r.data.userRoleName}),e.isShowLoading=!1,e.$router.replace("index")):(e.$Message.error(r.data.error),e.isShowLoading=!1)}).catch(function(r){e.$Message.error(r.response.data.error),e.isShowLoading=!1,s(r)})});this.$Message.warning("请输入用户名和密码")}}},i={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"login-vue",style:e.bg},[s("div",{staticClass:"container"},[s("p",{staticClass:"title"},[e._v("基于人脸识别的智能会议室管理系统")]),e._v(" "),s("div",{staticClass:"input-c"},[s("Input",{attrs:{prefix:"ios-contact",placeholder:"用户名",clearable:""},on:{"on-blur":e.verifyUsername},model:{value:e.username,callback:function(r){e.username=r},expression:"username"}}),e._v(" "),s("p",{staticClass:"error"},[e._v(e._s(e.usernameError))])],1),e._v(" "),s("div",{staticClass:"input-c"},[s("Input",{attrs:{type:"password",prefix:"md-lock",placeholder:"密码",clearable:""},on:{"on-blur":e.verifyPassword},model:{value:e.password,callback:function(r){e.password=r},expression:"password"}}),e._v(" "),s("p",{staticClass:"error"},[e._v(e._s(e.passwordError))])],1),e._v(" "),s("Button",{staticClass:"submit",attrs:{loading:e.isShowLoading,type:"primary"},on:{click:e.loginByUserNameAndPassWord}},[e._v("登录")]),e._v(" "),s("Button",{staticClass:"account",attrs:{type:"primary",shape:"circle"}},[s("span",{on:{click:e.faceLogin}},[e._v("刷脸登录")])])],1)])},staticRenderFns:[]};var c=s("VU/8")(o,i,!1,function(e){s("/jX6")},null,null);r.default=c.exports},izGb:function(e,r,s){e.exports=s.p+"static/img/bg04.dff7ddf.jpg"}});
//# sourceMappingURL=2.8b7cb4ee70e87c7a6a54.js.map