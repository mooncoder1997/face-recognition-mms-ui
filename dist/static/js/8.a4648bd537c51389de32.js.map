{"version":3,"sources":["webpack:///src/components/UserInfo/ChangePassword/index.vue","webpack:///./src/components/UserInfo/ChangePassword/index.vue?69d6","webpack:///./src/components/UserInfo/ChangePassword/index.vue","webpack:///./src/api/user.js"],"names":["ChangePassword","name","data","_this","this","formCustom","passwd","passwdCheck","ruleCustom","validator","rule","value","callback","Error","$refs","validateField","trigger","methods","updatePassword","_this2","validate","valid","promise_default","a","resolve","reject","Object","user","userId","then","response","console","log","code","$Message","success","$store","commit","userName","userGender","userEmail","userRoleName","$router","replace","error","message","handleReset","resetFields","computed","state","UserInfo_ChangePassword","render","_vm","_h","$createElement","_c","_self","ref","attrs","model","rules","label-width","label","prop","type","$$v","$set","expression","_v","on","click","$event","staticStyle","margin-left","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","request","url","method","userMobile","userRemarks","userPassword","__WEBPACK_IMPORTED_MODULE_0__util_request__"],"mappings":"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","file":"static/js/8.a4648bd537c51389de32.js","sourcesContent":["<template>\n  <Form ref=\"formCustom\" :model=\"formCustom\" :rules=\"ruleCustom\" :label-width=\"80\">\n    <FormItem label=\"新密码: \" prop=\"passwd\">\n      <Input type=\"password\" v-model=\"formCustom.passwd\"></Input>\n    </FormItem>\n    <FormItem label=\"确认: \" prop=\"passwdCheck\">\n      <Input type=\"password\" v-model=\"formCustom.passwdCheck\"></Input>\n    </FormItem>\n    <FormItem>\n      <Button type=\"primary\" @click=\"updatePassword('formCustom')\">确认修改</Button>\n      <Button @click=\"handleReset('formCustom')\" style=\"margin-left: 8px\">重置</Button>\n    </FormItem>\n  </Form>\n</template>\n\n<script>\n  import {UpdatePassword} from \"../../../api/user\";\n\n  export default {\n    name: \"ChangePassword\",\n    data () {\n      const validatePass = (rule, value, callback) => {\n        if (value === '') {\n          callback(new Error('请输入密码!'));\n        } else {\n          if (this.formCustom.passwdCheck !== '') {\n            // 对第二个密码框单独验证\n            this.$refs.formCustom.validateField('passwdCheck');\n          }\n          callback();\n        }\n      };\n      const validatePassCheck = (rule, value, callback) => {\n        if (value === '') {\n          callback(new Error('请再输一次密码！'));\n        } else if (value !== this.formCustom.passwd) {\n          callback(new Error('两次输入的密码不匹配！'));\n        } else {\n          callback();\n        }\n      };\n\n      return {\n        formCustom: {\n          passwd: '',\n          passwdCheck: ''\n        },\n        ruleCustom: {\n          passwd: [\n            { validator: validatePass, trigger: 'blur' }\n          ],\n          passwdCheck: [\n            { validator: validatePassCheck, trigger: 'blur' }\n          ]\n        }\n      }\n    },\n    methods: {\n      updatePassword (name) {\n        this.$refs[name].validate((valid) => {\n          if (valid) {\n            return new Promise(((resolve, reject) => {\n              UpdatePassword(this.userId, this.formCustom.passwd).then(response => {\n                console.log(this.userId);\n                response = response.data;\n                if (response.code === 201) {\n                  this.$Message.success(\"修改密码成功，请重新登录！\");\n                  this.$store.commit('setUser', {\n                    userId: '',\n                    userName: '',\n                    userGender: '',\n                    userEmail: '',\n                    userRoleName: ''\n                  });\n                  this.$router.replace({name: 'Login'});\n                } else {\n                  this.$Message.error(response.message);\n                }\n              })\n            }));\n          } else {\n            this.$Message.error('修改密码失败！');\n          }\n        })\n      },\n      handleReset (name) {\n        this.$refs[name].resetFields();\n      }\n    },\n    computed: {\n      userId() {\n        return this.$store.state.user.userId;\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/UserInfo/ChangePassword/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Form',{ref:\"formCustom\",attrs:{\"model\":_vm.formCustom,\"rules\":_vm.ruleCustom,\"label-width\":80}},[_c('FormItem',{attrs:{\"label\":\"新密码: \",\"prop\":\"passwd\"}},[_c('Input',{attrs:{\"type\":\"password\"},model:{value:(_vm.formCustom.passwd),callback:function ($$v) {_vm.$set(_vm.formCustom, \"passwd\", $$v)},expression:\"formCustom.passwd\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"确认: \",\"prop\":\"passwdCheck\"}},[_c('Input',{attrs:{\"type\":\"password\"},model:{value:(_vm.formCustom.passwdCheck),callback:function ($$v) {_vm.$set(_vm.formCustom, \"passwdCheck\", $$v)},expression:\"formCustom.passwdCheck\"}})],1),_vm._v(\" \"),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.updatePassword('formCustom')}}},[_vm._v(\"确认修改\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-left\":\"8px\"},on:{\"click\":function($event){return _vm.handleReset('formCustom')}}},[_vm._v(\"重置\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f1bec0cc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/UserInfo/ChangePassword/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f1bec0cc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f1bec0cc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f1bec0cc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/UserInfo/ChangePassword/index.vue\n// module id = null\n// module chunks = ","import request from '../util/request'\n\nexport function QueryUserByUserId(userId) {\n  return request({\n    url: '/mms-provider-user/api/v1/users/' + userId,\n    method: 'get'\n  })\n}\n\nexport function QueryAllUser() {\n  return request({\n    url: '/mms-provider-user/api/v1/users',\n    method: 'get'\n  })\n}\n\nexport function UpdateUser(userId, userName, userGender, userEmail, userMobile, userRoleName, userRemarks) {\n  const data = {\n    'userId': userId,\n    'userName': userName,\n    'userGender': userGender,\n    'userEmail': userEmail,\n    'userMobile': userMobile,\n    'userRoleName': userRoleName,\n    'userRemarks': userRemarks\n  };\n  return request({\n    url: '/mms-provider-user/api/v1/user',\n    method: 'put',\n    data\n  })\n}\n\nexport function UpdatePassword(userId, userPassword) {\n  const data = {\n    'userId': userId,\n    'userPassword': userPassword\n  };\n  return request({\n    url: '/mms-provider-user/api/v1/user',\n    method: 'put',\n    data\n  })\n}\n\nexport function DeleteUserByUserId(userId) {\n  return request({\n    url: '/mms-provider-user/api/v1/user/' + userId,\n    method: 'delete'\n  })\n}\n\nexport function AddUser(userId, userPassword, userName, userGender, userEmail, userMobile, userRoleName, userRemarks) {\n  const data = {\n    'userId': userId,\n    'userPassword': userPassword,\n    'userName': userName,\n    'userGender': userGender,\n    'userEmail': userEmail,\n    'userMobile': userMobile,\n    'userRoleName': userRoleName,\n    'userRemarks': userRemarks\n  };\n  return request({\n    url: '/mms-provider-user/api/v1/user',\n    method: 'post',\n    data\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/user.js"],"sourceRoot":""}